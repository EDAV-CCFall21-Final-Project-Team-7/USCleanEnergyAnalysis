# Data transformation

Correcting Date format in Financial Data
```{r}
library(tidyverse)

Crushing_crude_oil <-read_csv('data/raw/Cushing_OK_WTI_Spot_Price_FOB.csv')


i<-0
for(val in Crushing_crude_oil$Day){
  i<-i+1
  if(nchar(str_split(Crushing_crude_oil$Day[i],"/",simplify=TRUE)[3]) == 2){
    temp = paste(str_split(Crushing_crude_oil$Day[i],"/",simplify=TRUE)[1],
                 str_split(Crushing_crude_oil$Day[i],"/",simplify=TRUE)[2],
                 sep = "/")
    temp2 = paste("20",
                  str_split(Crushing_crude_oil$Day[i],"/",simplify=TRUE)[3],
                  sep="")
    Crushing_crude_oil$Day[i]<-paste(temp,temp2,sep="/")
  }
}
write.csv(Crushing_crude_oil,'data/raw/clean_crushing_crude_oil.csv',
          row.names=FALSE)
Crushing_crude_oil
```
```{r}
worldbank <-read_csv('data/raw/US_Country_Data_WorldBank.csv') 
str_split(names(worldbank)," ")

i<-0
for (val in names(worldbank)){
  i<-i+1
  names(worldbank)[i] <- str_split(names(worldbank)[i]," ",simplify=TRUE)[1]
}
worldbank <- worldbank[,2:length(names(worldbank))]
names(worldbank)[3] <- 'Series Code'

worldbank <- worldbank %>% filter(Country == 'USA')

worldbank<-as.data.frame(worldbank)

worldbank

for (name in names(worldbank)){
  for (row in row.names(worldbank)){
    if (worldbank[as.integer(row),name] == ".."){
      worldbank[as.integer(row),name] <- NA
    }
  }
}


drop <- c("Series Code","Country")

worldbank<-worldbank[,!(names(worldbank) %in% drop)]
worldbank

write.csv(worldbank,'data/raw/clean_worldbank.csv',
          row.names=FALSE)
```



